extends CanvasModulate

signal doneWithFade
var triggerFade = 0
var colorIndex = 0
var colorList = [Color(1.0, 1.0, 1.0),
 Color(0.9473684210526316, 0.9473684210526316, 0.9473684210526316), 
Color(0.8947368421052632, 0.8947368421052632, 0.8947368421052632), 
Color(0.8421052631578947, 0.8421052631578947, 0.8421052631578947), 
Color(0.7894736842105263, 0.7894736842105263, 0.7894736842105263), 
Color(0.736842105263158, 0.736842105263158, 0.736842105263158), 
Color(0.6842105263157895, 0.6842105263157895, 0.6842105263157895), 
Color(0.631578947368421, 0.631578947368421, 0.631578947368421), 
Color(0.5789473684210527, 0.5789473684210527, 0.5789473684210527), 
Color(0.5263157894736843, 0.5263157894736843, 0.5263157894736843), 
Color(0.4736842105263158, 0.4736842105263158, 0.4736842105263158), 
Color(0.42105263157894735, 0.42105263157894735, 0.42105263157894735), 
Color(0.368421052631579, 0.368421052631579, 0.368421052631579), 
Color(0.3157894736842106, 0.3157894736842106, 0.3157894736842106), 
Color(0.26315789473684215, 0.26315789473684215, 0.26315789473684215), 
Color(0.21052631578947367, 0.21052631578947367, 0.21052631578947367), 
Color(0.1578947368421053, 0.1578947368421053, 0.1578947368421053), 
Color(0.10526315789473695, 0.10526315789473695, 0.10526315789473695), 
Color(0.052631578947368474, 0.052631578947368474, 0.052631578947368474), 
Color(0.0, 0.0, 0.0)]


func _ready():
	self.color = Color(1.0,1.0,1.0)
	set_process(true)
	pass

func _process(delta):
	if triggerFade == 1:
		colorIndex += 0.2
		if (int(colorIndex)*1.0 - colorIndex) < 0.1:
			self.color = colorList[colorIndex]
			if colorIndex > 19:
				triggerFade = 0
				emit_signal("doneWithFade")
			

func fadeToBlack():
	triggerFade = 1
	pass